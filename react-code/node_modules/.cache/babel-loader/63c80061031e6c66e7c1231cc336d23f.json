{"ast":null,"code":"var _jsxFileName = \"/home/adityaa/Desktop/stuff/code/shayari/react-code/src/ShayariList.js\";\n// ShayariList.js\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport Shayari from './Shayari';\nimport { AuthContext } from './AuthContext';\nfunction ShayariList({\n  searchTerm\n}) {\n  const [shayari, setShayari] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [selectedTag, setSelectedTag] = useState('');\n  const {\n    authTokens\n  } = useContext(AuthContext);\n  useEffect(() => {\n    fetch('http://127.0.0.1:8000/shayaris/').then(response => response.json()).then(data => {\n      setShayari(data);\n    }).catch(error => console.error('Error:', error));\n  }, []);\n  useEffect(() => {\n    fetch('http://127.0.0.1:8000/tags/').then(response => response.json()).then(data => setTags(data)).catch(error => console.error('Error fetching tags:', error));\n  }, []);\n  const handleLike = id => {\n    if (!authTokens) {\n      alert('Please log in to like shayari.');\n      return;\n    }\n    fetch(`http://127.0.0.1:8000/shayari/${id}/like/`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${authTokens.access}`\n      }\n    }).then(response => response.json()).then(data => {\n      if (data.message) {\n        setShayari(prevShayaris => prevShayaris.map(shayari => shayari.id === id ? {\n          ...shayari,\n          like_count: shayari.like_count + 1\n        } : shayari));\n      } else {\n        alert(data.error);\n      }\n    }).catch(error => console.error('Error:', error));\n  };\n  const handleDislike = id => {\n    if (!authTokens) {\n      alert('Please log in to dislike shayari.');\n      return;\n    }\n    fetch(`http://127.0.0.1:8000/shayari/${id}/dislike/`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${authTokens.access}`\n      }\n    }).then(response => response.json()).then(data => {\n      if (data.message) {\n        setShayari(prevShayaris => prevShayaris.map(shayari => shayari.id === id ? {\n          ...shayari,\n          dislike_count: shayari.dislike_count + 1\n        } : shayari));\n      } else {\n        alert(data.error);\n      }\n    }).catch(error => console.error('Error:', error));\n  };\n  const filteredShayaris = shayari.filter(elem => {\n    const term = searchTerm.toLowerCase();\n    const matchesSearch = elem.title.toLowerCase().includes(term) || elem.author.toLowerCase().includes(term) || elem.content.toLowerCase().includes(term);\n    const matchesTag = selectedTag ? elem.tags.some(tag => tag.name === selectedTag) : true;\n    return matchesSearch && matchesTag;\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tag-filter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    value: selectedTag,\n    onChange: e => setSelectedTag(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, \"All Tags\"), tags.map(tag => /*#__PURE__*/React.createElement(\"option\", {\n    key: tag.id,\n    value: tag.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 25\n    }\n  }, tag.name)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shayari-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, filteredShayaris.map(elem => /*#__PURE__*/React.createElement(Shayari, {\n    key: elem.id,\n    id: elem.id,\n    title: elem.title,\n    author: elem.author,\n    content: elem.content,\n    likes: elem.like_count,\n    dislikes: elem.dislike_count,\n    tags: elem.tags,\n    onLike: () => handleLike(elem.id),\n    onDislike: () => handleDislike(elem.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }))));\n}\nexport default ShayariList;","map":{"version":3,"names":["React","useEffect","useState","useContext","Shayari","AuthContext","ShayariList","searchTerm","shayari","setShayari","tags","setTags","selectedTag","setSelectedTag","authTokens","fetch","then","response","json","data","catch","error","console","handleLike","id","alert","method","headers","Authorization","access","message","prevShayaris","map","like_count","handleDislike","dislike_count","filteredShayaris","filter","elem","term","toLowerCase","matchesSearch","title","includes","author","content","matchesTag","some","tag","name","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","value","onChange","e","target","key","likes","dislikes","onLike","onDislike"],"sources":["/home/adityaa/Desktop/stuff/code/shayari/react-code/src/ShayariList.js"],"sourcesContent":["// ShayariList.js\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport Shayari from './Shayari';\nimport { AuthContext } from './AuthContext';\n\nfunction ShayariList({ searchTerm }) {\n    const [shayari, setShayari] = useState([]);\n    const [tags, setTags] = useState([]);\n    const [selectedTag, setSelectedTag] = useState('');\n    const { authTokens } = useContext(AuthContext);\n\n    useEffect(() => {\n        fetch('http://127.0.0.1:8000/shayaris/')\n            .then((response) => response.json())\n            .then((data) => {\n                setShayari(data);\n            })\n            .catch((error) => console.error('Error:', error));\n    }, []);\n\n    useEffect(() => {\n        fetch('http://127.0.0.1:8000/tags/')\n            .then((response) => response.json())\n            .then((data) => setTags(data))\n            .catch((error) => console.error('Error fetching tags:', error));\n    }, []);\n\n    const handleLike = (id) => {\n        if (!authTokens) {\n            alert('Please log in to like shayari.');\n            return;\n        }\n        fetch(`http://127.0.0.1:8000/shayari/${id}/like/`, {\n            method: 'POST',\n            headers: {\n                Authorization: `Bearer ${authTokens.access}`,\n            },\n        })\n            .then((response) => response.json())\n            .then((data) => {\n                if (data.message) {\n                    setShayari((prevShayaris) =>\n                        prevShayaris.map((shayari) =>\n                            shayari.id === id ? { ...shayari, like_count: shayari.like_count + 1 } : shayari\n                        )\n                    );\n                } else {\n                    alert(data.error);\n                }\n            })\n            .catch((error) => console.error('Error:', error));\n    };\n\n    const handleDislike = (id) => {\n        if (!authTokens) {\n            alert('Please log in to dislike shayari.');\n            return;\n        }\n        fetch(`http://127.0.0.1:8000/shayari/${id}/dislike/`, {\n            method: 'POST',\n            headers: {\n                Authorization: `Bearer ${authTokens.access}`,\n            },\n        })\n            .then((response) => response.json())\n            .then((data) => {\n                if (data.message) {\n                    setShayari((prevShayaris) =>\n                        prevShayaris.map((shayari) =>\n                            shayari.id === id ? { ...shayari, dislike_count: shayari.dislike_count + 1 } : shayari\n                        )\n                    );\n                } else {\n                    alert(data.error);\n                }\n            })\n            .catch((error) => console.error('Error:', error));\n    };\n\n    const filteredShayaris = shayari.filter((elem) => {\n        const term = searchTerm.toLowerCase();\n        const matchesSearch =\n            elem.title.toLowerCase().includes(term) ||\n            elem.author.toLowerCase().includes(term) ||\n            elem.content.toLowerCase().includes(term);\n\n        const matchesTag = selectedTag ? elem.tags.some((tag) => tag.name === selectedTag) : true;\n\n        return matchesSearch && matchesTag;\n    });\n\n    return (\n        <div>\n            <div className=\"tag-filter\">\n                <select value={selectedTag} onChange={(e) => setSelectedTag(e.target.value)}>\n                    <option value=\"\">All Tags</option>\n                    {tags.map((tag) => (\n                        <option key={tag.id} value={tag.name}>\n                            {tag.name}\n                        </option>\n                    ))}\n                </select>\n            </div>\n            <div className=\"shayari-list\">\n                {filteredShayaris.map((elem) => (\n                    <Shayari\n                        key={elem.id}\n                        id={elem.id}\n                        title={elem.title}\n                        author={elem.author}\n                        content={elem.content}\n                        likes={elem.like_count}\n                        dislikes={elem.dislike_count}\n                        tags={elem.tags}\n                        onLike={() => handleLike(elem.id)}\n                        onDislike={() => handleDislike(elem.id)}\n                    />\n                ))}\n            </div>\n        </div>\n    );\n}\n\nexport default ShayariList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}