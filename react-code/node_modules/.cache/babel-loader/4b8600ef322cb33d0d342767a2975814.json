{"ast":null,"code":"var _jsxFileName = \"/home/adityaa/Desktop/stuff/code/shayari/react-code/src/AuthContext.js\";\n// AuthContext.js\n\nimport React, { createContext, useState, useEffect } from 'react';\nimport jwt_decode from 'jwt-decode';\nexport const AuthContext = createContext();\nexport const AuthProvider = ({\n  children\n}) => {\n  const [authTokens, setAuthTokens] = useState(() => {\n    const token = localStorage.getItem('authTokens');\n    return token ? JSON.parse(token) : null;\n  });\n  const [user, setUser] = useState(() => {\n    const token = localStorage.getItem('authTokens');\n    return token ? jwt_decode(JSON.parse(token).access) : null;\n  });\n  const loginUser = async (username, password) => {\n    const response = await fetch('http://127.0.0.1:8000/api/login/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    });\n    const data = await response.json();\n    if (response.status === 200) {\n      setAuthTokens(data);\n      setUser(jwt_decode(data.access));\n      localStorage.setItem('authTokens', JSON.stringify(data));\n      return true;\n    } else {\n      alert('Invalid credentials');\n      return false;\n    }\n  };\n  const logoutUser = () => {\n    setAuthTokens(null);\n    setUser(null);\n    localStorage.removeItem('authTokens');\n  };\n  const contextData = {\n    user,\n    authTokens,\n    loginUser,\n    logoutUser\n  };\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: contextData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 12\n    }\n  }, children);\n};","map":{"version":3,"names":["React","createContext","useState","useEffect","jwt_decode","AuthContext","AuthProvider","children","authTokens","setAuthTokens","token","localStorage","getItem","JSON","parse","user","setUser","access","loginUser","username","password","response","fetch","method","headers","body","stringify","data","json","status","setItem","alert","logoutUser","removeItem","contextData","createElement","Provider","value","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/home/adityaa/Desktop/stuff/code/shayari/react-code/src/AuthContext.js"],"sourcesContent":["// AuthContext.js\n\nimport React, { createContext, useState, useEffect } from 'react';\nimport jwt_decode from 'jwt-decode';\n\nexport const AuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n    const [authTokens, setAuthTokens] = useState(() => {\n        const token = localStorage.getItem('authTokens');\n        return token ? JSON.parse(token) : null;\n    });\n    const [user, setUser] = useState(() => {\n        const token = localStorage.getItem('authTokens');\n        return token ? jwt_decode(JSON.parse(token).access) : null;\n    });\n\n    const loginUser = async (username, password) => {\n        const response = await fetch('http://127.0.0.1:8000/api/login/', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ username, password }),\n        });\n        const data = await response.json();\n        if (response.status === 200) {\n            setAuthTokens(data);\n            setUser(jwt_decode(data.access));\n            localStorage.setItem('authTokens', JSON.stringify(data));\n            return true;\n        } else {\n            alert('Invalid credentials');\n            return false;\n        }\n    };\n\n    const logoutUser = () => {\n        setAuthTokens(null);\n        setUser(null);\n        localStorage.removeItem('authTokens');\n    };\n\n    const contextData = {\n        user,\n        authTokens,\n        loginUser,\n        logoutUser,\n    };\n\n    return <AuthContext.Provider value={contextData}>{children}</AuthContext.Provider>;\n};\n"],"mappings":";AAAA;;AAEA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACjE,OAAOC,UAAU,MAAM,YAAY;AAEnC,OAAO,MAAMC,WAAW,GAAGJ,aAAa,CAAC,CAAC;AAE1C,OAAO,MAAMK,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAC1C,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGP,QAAQ,CAAC,MAAM;IAC/C,MAAMQ,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;IAChD,OAAOF,KAAK,GAAGG,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC,GAAG,IAAI;EAC3C,CAAC,CAAC;EACF,MAAM,CAACK,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAC,MAAM;IACnC,MAAMQ,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;IAChD,OAAOF,KAAK,GAAGN,UAAU,CAACS,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC,CAACO,MAAM,CAAC,GAAG,IAAI;EAC9D,CAAC,CAAC;EAEF,MAAMC,SAAS,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,QAAQ,KAAK;IAC5C,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,kCAAkC,EAAE;MAC7DC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDC,IAAI,EAAEZ,IAAI,CAACa,SAAS,CAAC;QAAEP,QAAQ;QAAEC;MAAS,CAAC;IAC/C,CAAC,CAAC;IACF,MAAMO,IAAI,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;IAClC,IAAIP,QAAQ,CAACQ,MAAM,KAAK,GAAG,EAAE;MACzBpB,aAAa,CAACkB,IAAI,CAAC;MACnBX,OAAO,CAACZ,UAAU,CAACuB,IAAI,CAACV,MAAM,CAAC,CAAC;MAChCN,YAAY,CAACmB,OAAO,CAAC,YAAY,EAAEjB,IAAI,CAACa,SAAS,CAACC,IAAI,CAAC,CAAC;MACxD,OAAO,IAAI;IACf,CAAC,MAAM;MACHI,KAAK,CAAC,qBAAqB,CAAC;MAC5B,OAAO,KAAK;IAChB;EACJ,CAAC;EAED,MAAMC,UAAU,GAAGA,CAAA,KAAM;IACrBvB,aAAa,CAAC,IAAI,CAAC;IACnBO,OAAO,CAAC,IAAI,CAAC;IACbL,YAAY,CAACsB,UAAU,CAAC,YAAY,CAAC;EACzC,CAAC;EAED,MAAMC,WAAW,GAAG;IAChBnB,IAAI;IACJP,UAAU;IACVU,SAAS;IACTc;EACJ,CAAC;EAED,oBAAOhC,KAAA,CAAAmC,aAAA,CAAC9B,WAAW,CAAC+B,QAAQ;IAACC,KAAK,EAAEH,WAAY;IAAAI,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAEpC,QAA+B,CAAC;AACtF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}