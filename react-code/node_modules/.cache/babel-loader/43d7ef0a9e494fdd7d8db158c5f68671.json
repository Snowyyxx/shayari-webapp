{"ast":null,"code":"var _jsxFileName = \"/home/adityaa/Desktop/stuff/code/shayari/react-code/src/ShayariList.js\";\nimport React, { useEffect, useState } from \"react\";\nimport Shayari from './Shayari';\nfunction ShayariList() {\n  const [shayari, setShayari] = useState([]);\n  useEffect(() => {\n    fetch('http://127.0.0.1:8000/shayaris/').then(response => response.json()).then(data => {\n      const fetchedShayaris = data.map(item => ({\n        id: item.id,\n        title: item.title,\n        author: item.author,\n        content: item.content,\n        likes: item.like_count,\n        dislikes: item.dislike_count\n      }));\n      setShayari(fetchedShayaris);\n    }).catch(error => console.error('Error:', error));\n  }, []);\n  const handleLike = id => {\n    // Update the local state immediately\n    setShayari(prevShayaris => prevShayaris.map(shayari => shayari.id === id ? {\n      ...shayari,\n      likes: shayari.likes + 1\n    } : shayari));\n\n    // Make the POST request\n    fetch(`http://127.0.0.1:8000/shayari/${id}/like/`, {\n      method: 'POST'\n    }).then(response => response.json()).catch(error => console.error('Error:', error));\n  };\n  const handleDislike = id => {\n    setShayari(prevShayari => prevShayari.map(elem, () => {\n      if (elem.id == id) {}\n    }));\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shayari-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, shayari.map((elem, idx) => /*#__PURE__*/React.createElement(Shayari, {\n    key: idx,\n    id: elem.id,\n    title: elem.title,\n    author: `- ${elem.author}`,\n    content: elem.content,\n    likes: elem.likes,\n    dislikes: elem.dislikes,\n    onLike: () => handleLike(elem.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  })));\n}\nexport default ShayariList;","map":{"version":3,"names":["React","useEffect","useState","Shayari","ShayariList","shayari","setShayari","fetch","then","response","json","data","fetchedShayaris","map","item","id","title","author","content","likes","like_count","dislikes","dislike_count","catch","error","console","handleLike","prevShayaris","method","handleDislike","prevShayari","elem","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","idx","key","onLike"],"sources":["/home/adityaa/Desktop/stuff/code/shayari/react-code/src/ShayariList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Shayari from './Shayari';\n\nfunction ShayariList() {\n    const [shayari, setShayari] = useState([]);\n\n    useEffect(() => {\n        fetch('http://127.0.0.1:8000/shayaris/')\n            .then(response => response.json())\n            .then(data => {\n                const fetchedShayaris = data.map(item => ({\n                    id: item.id,\n                    title: item.title,\n                    author: item.author,\n                    content: item.content,\n                    likes: item.like_count,\n                    dislikes: item.dislike_count\n                }));\n                setShayari(fetchedShayaris);\n            })\n            .catch(error => console.error('Error:', error));\n    }, []);\n\n    const handleLike = (id) => {\n        // Update the local state immediately\n        setShayari(prevShayaris =>\n            prevShayaris.map(shayari =>\n                shayari.id === id ? { ...shayari, likes: shayari.likes + 1 } : shayari\n            )\n        );\n\n        // Make the POST request\n        fetch(`http://127.0.0.1:8000/shayari/${id}/like/`, {\n            method: 'POST',\n        })\n        .then(response => response.json())\n        .catch(error => console.error('Error:', error));\n    };\n\n    const handleDislike = (id) =>{\n        setShayari(prevShayari =>\n            prevShayari.map(elem,()=>{\n                if (elem.id==id){\n                \n                }\n            })\n        )\n    }\n\n\n    return (\n        <div className=\"shayari-list\">\n            {shayari.map((elem, idx) => (\n                <Shayari \n                    key={idx} \n                    id={elem.id} \n                    title={elem.title} \n                    author={`- ${elem.author}`}\n                    content={elem.content} \n                    likes={elem.likes} \n                    dislikes={elem.dislikes} \n                    onLike={() => handleLike(elem.id)}\n                />\n            ))}\n        </div>\n    );\n}\n\nexport default ShayariList;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,OAAO,MAAM,WAAW;AAE/B,SAASC,WAAWA,CAAA,EAAG;EACnB,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGJ,QAAQ,CAAC,EAAE,CAAC;EAE1CD,SAAS,CAAC,MAAM;IACZM,KAAK,CAAC,iCAAiC,CAAC,CACnCC,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,IAAI;MACV,MAAMC,eAAe,GAAGD,IAAI,CAACE,GAAG,CAACC,IAAI,KAAK;QACtCC,EAAE,EAAED,IAAI,CAACC,EAAE;QACXC,KAAK,EAAEF,IAAI,CAACE,KAAK;QACjBC,MAAM,EAAEH,IAAI,CAACG,MAAM;QACnBC,OAAO,EAAEJ,IAAI,CAACI,OAAO;QACrBC,KAAK,EAAEL,IAAI,CAACM,UAAU;QACtBC,QAAQ,EAAEP,IAAI,CAACQ;MACnB,CAAC,CAAC,CAAC;MACHhB,UAAU,CAACM,eAAe,CAAC;IAC/B,CAAC,CAAC,CACDW,KAAK,CAACC,KAAK,IAAIC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC,CAAC;EACvD,CAAC,EAAE,EAAE,CAAC;EAEN,MAAME,UAAU,GAAIX,EAAE,IAAK;IACvB;IACAT,UAAU,CAACqB,YAAY,IACnBA,YAAY,CAACd,GAAG,CAACR,OAAO,IACpBA,OAAO,CAACU,EAAE,KAAKA,EAAE,GAAG;MAAE,GAAGV,OAAO;MAAEc,KAAK,EAAEd,OAAO,CAACc,KAAK,GAAG;IAAE,CAAC,GAAGd,OACnE,CACJ,CAAC;;IAED;IACAE,KAAK,CAAC,iCAAiCQ,EAAE,QAAQ,EAAE;MAC/Ca,MAAM,EAAE;IACZ,CAAC,CAAC,CACDpB,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCa,KAAK,CAACC,KAAK,IAAIC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC,CAAC;EACnD,CAAC;EAED,MAAMK,aAAa,GAAId,EAAE,IAAI;IACzBT,UAAU,CAACwB,WAAW,IAClBA,WAAW,CAACjB,GAAG,CAACkB,IAAI,EAAC,MAAI;MACrB,IAAIA,IAAI,CAAChB,EAAE,IAAEA,EAAE,EAAC,CAEhB;IACJ,CAAC,CACL,CAAC;EACL,CAAC;EAGD,oBACIf,KAAA,CAAAgC,aAAA;IAAKC,SAAS,EAAC,cAAc;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACxBlC,OAAO,CAACQ,GAAG,CAAC,CAACkB,IAAI,EAAES,GAAG,kBACnBxC,KAAA,CAAAgC,aAAA,CAAC7B,OAAO;IACJsC,GAAG,EAAED,GAAI;IACTzB,EAAE,EAAEgB,IAAI,CAAChB,EAAG;IACZC,KAAK,EAAEe,IAAI,CAACf,KAAM;IAClBC,MAAM,EAAE,KAAKc,IAAI,CAACd,MAAM,EAAG;IAC3BC,OAAO,EAAEa,IAAI,CAACb,OAAQ;IACtBC,KAAK,EAAEY,IAAI,CAACZ,KAAM;IAClBE,QAAQ,EAAEU,IAAI,CAACV,QAAS;IACxBqB,MAAM,EAAEA,CAAA,KAAMhB,UAAU,CAACK,IAAI,CAAChB,EAAE,CAAE;IAAAmB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACrC,CACJ,CACA,CAAC;AAEd;AAEA,eAAenC,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module"}